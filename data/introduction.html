
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Introduction &#8212; Open-Source Tools &amp; Data for Music Source Separation</title>
    
  <link rel="stylesheet" href="../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/myfile.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Datasets" href="datasets.html" />
    <link rel="prev" title="Architectures" href="../approaches/deep/architectures.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  
  <h1 class="site-logo" id="site-title">Open-Source Tools & Data for Music Source Separation</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../landing.html">
   Welcome!
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/tutorial_structure.html">
   Tutorial Structure and Setup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/src_sep_101.html">
   What is Source Separation?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/open_src_projects.html">
   Map of Open-Source Source Separation Projects
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Basics of Source Separation
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../basics/representations.html">
   Representing Audio
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../basics/tf_and_masking.html">
   TF Representations and Masking
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../basics/phase.html">
   Phase
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../basics/evaluation.html">
   Evaluation
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  First Steps
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../first_steps/nussl_intro.html">
   Introduction to nussl
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../first_steps/repetition.html">
   Putting it All Together: Repetition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../first_steps/byo_hpss.html">
   Build Your Own HPSS
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Deep Learning Approaches
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../approaches/deep/introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../approaches/deep/building_blocks.html">
   Building Blocks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../approaches/deep/architectures.html">
   Architectures
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Data
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="datasets.html">
   Datasets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="musdb18.html">
   The MUSDB18 dataset
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="scaper.html">
   Generating mixtures with Scaper
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Conclusions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../conclusions/applications.html">
   Applications
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../conclusions/concluding_remarks.html">
   Concluding Remarks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../conclusions/additional_resources.html">
   Additional Resources
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendix
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/glossary.html">
   Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../zzz_refs.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/resources.html">
   Additional Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/acknowledgements.html">
   Acknowledgements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/authors.html">
   About the Authors
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/data/introduction.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/source-separation/tutorial"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/source-separation/tutorial/issues/new?title=Issue%20on%20page%20%2Fdata/introduction.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-for-music-source-separation">
   Data for music source separation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-is-a-key-component">
   Data is a key component
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-for-source-separation-is-hard-to-obtain">
   Data for source separation is hard to obtain
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-outline">
   Chapter outline
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="introduction">
<span id="data-introduction"></span><h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>In this chapter we’ll cover the key aspects we need to know about data for source separation: what do data for source
separation look like, relevant datasets and, importantly, how to programatically generate training data (mixtures)
in a way that’s efficient, reproducible, and maximizes the performance we can squeeze out of our data.</p>
<div class="section" id="data-for-music-source-separation">
<h2>Data for music source separation<a class="headerlink" href="#data-for-music-source-separation" title="Permalink to this headline">¶</a></h2>
<p>At a high level, the inputs and outputs of a source separation model look like this:</p>
<div class="figure align-default" id="fig-sourcesepio">
<a class="reference internal image-reference" href="../_images/source_separation_io.png"><img alt="../_images/source_separation_io.png" src="../_images/source_separation_io.png" style="height: 300px;" /></a>
<p class="caption"><span class="caption-number">Fig. 33 </span><span class="caption-text">Inputs and outputs of a source separation model.</span><a class="headerlink" href="#fig-sourcesepio" title="Permalink to this image">¶</a></p>
</div>
<p>For this tutorial, we will assume the inputs and outputs were created in the following way:</p>
<ol class="simple">
<li><p>Each instrument or voice is recorded in isolation into a separate audio track, called a “stem”. The stem may be
processed with effects such as compression, reverb, etc.</p></li>
<li><p>The mixture is obtained by summing the processed stems.</p></li>
<li><p>The model takes the mixture as input and outputs its estimate of each stem</p></li>
</ol>
<div class="figure align-default" id="fig-mixing">
<a class="reference internal image-reference" href="../_images/music_mixing.png"><img alt="../_images/music_mixing.png" src="../_images/music_mixing.png" style="height: 300px;" /></a>
<p class="caption"><span class="caption-number">Fig. 34 </span><span class="caption-text">Mixing stems to produce a mixture (mix).</span><a class="headerlink" href="#fig-mixing" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a simplified view of music creation. In practice, the mixture (musicians refer to this as the <em>mix</em>) typically
goes through a <em>mastering</em> step which includes the application of multiple non-linear transformations to the mixture signal
to produce the <em>master</em>, which is rarely a simple sum of the stems. Nonetheless, this simplified view (no mastering) allows
us to train models that produce compelling results, as we shall see throughout this tutorial.</p>
</div>
<p>Since the master is not a linear sum of the stems, for training a source separation model we instead create our own mixture
by summing the stems directly to create a linear mixture. When training a source separation model, we provide this mixture
as input, the model outputs the estimated stems, and we compare these to the original stems that were used to create the
mixture. The difference between the estimated stems and the original stems is used to update the model parameters during
training:</p>
<div class="figure align-default" id="fig-training">
<a class="reference internal image-reference" href="../_images/source_separation_training.png"><img alt="../_images/source_separation_training.png" src="../_images/source_separation_training.png" style="height: 300px;" /></a>
<p class="caption"><span class="caption-number">Fig. 35 </span><span class="caption-text">High-level diagram of training a source separation model.</span><a class="headerlink" href="#fig-training" title="Permalink to this image">¶</a></p>
</div>
<p>The difference between the estimated stems and original stems is also used to <em>evaluate</em> a trained source separation model,
as we shall see later on.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Our goal may not always be to separate all the stems. For example, we may want to train a model to only separate the vocals
from the accompaniment (i.e., everything else) in a mixture. In this case we can think of the mixture as the sum of two
stems: one containing the vocals and the other containing all other instruments. We can achieve this by mixing all but
the vocal stems into an “accompaniment stem”, and train the model to separate the mixture into these two stems.</p>
</div>
<p>In summary, from a data standpoint, to train a music source separation model we need:</p>
<ol class="simple">
<li><p>The isolated stems of all instruments/voices that comprise a music recording. This is commonly referred to as a
“multi-track recording”, since each instrument is recorded on a separate track of a digital audio workstation (DAW).</p></li>
<li><p>The ability to programatically create mixtures from these stems for training and evaluation.</p></li>
</ol>
</div>
<div class="section" id="data-is-a-key-component">
<h2>Data is a key component<a class="headerlink" href="#data-is-a-key-component" title="Permalink to this headline">¶</a></h2>
<p>Your model can only be as good as the data used to train it (the <a class="reference external" href="https://en.wikipedia.org/wiki/Garbage_in,_garbage_out">garbage in garbage
out</a> principle), and failing to use data (music) that is
representative of the data you plan to apply your model to (<a class="reference external" href="https://en.wikipedia.org/wiki/Sampling_bias">sampling bias</a>).
It may be tempting to generate simple synthetic
stems or make some multi-track recordings in the lab and use these to train a model. However, there is little to no chance
that a model trained on such data will generalize to real-world music. Put simply, you need to train your model with data
that is representative of the type of data you plan to apply your model to once it is trained.</p>
</div>
<div class="section" id="data-for-source-separation-is-hard-to-obtain">
<h2>Data for source separation is hard to obtain<a class="headerlink" href="#data-for-source-separation-is-hard-to-obtain" title="Permalink to this headline">¶</a></h2>
<p>Due to copyright, it is hard to obtain and share music recordings for machine learning purposes. It is even harder to obtain
multi-track recordings that include the isolated stems, as these are rarely made available by artists. Fortuntaely, the research
community has nonetheless been able to create and share multi-track datasets, as we shall see late. The size of these datasets
is typically very small compared to other machine learning datasets. Luckily for us, we have tools to generate multiple,
different mixtures from the same set of stems, helping us to maximize what our model can learn from a given set of stems.</p>
</div>
<div class="section" id="chapter-outline">
<h2>Chapter outline<a class="headerlink" href="#chapter-outline" title="Permalink to this headline">¶</a></h2>
<p>The remainder of this chapter is structured as follows:</p>
<ul class="simple">
<li><p>In <a class="reference internal" href="datasets.html#data-datasets"><span class="std std-ref">Datasets</span></a>, we will provide an overview of existing datasets for training music source separation models.</p></li>
<li><p>In <a class="reference internal" href="old.musdb18.html#data-musdb18"><span class="std std-ref">The MUSDB18 dataset</span></a>, we will go into further detail about the dataset we will use in this tutorial.</p></li>
<li><p>In <a class="reference internal" href="scaper.html#data-scaper"><span class="std std-ref">Data generation with Scaper</span></a>, we will learn how to use the Scaper library to generate and augment mixtures on-the-fly
for training and evaluation.</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "source-separation/tutorial",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./data"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="../approaches/deep/architectures.html" title="previous page">Architectures</a>
    <a class='right-next' id="next-link" href="datasets.html" title="next page">Datasets</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ethan Manilow, Prem Seetharaman, Justin Salamon<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.3da636dd464baa7582d2.js"></script>


    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-180111316-1', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    
  </body>
</html>